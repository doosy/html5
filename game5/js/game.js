/*! game5 - v0.1.0 - 2016-02-22 */
!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){function d(){D.load.spritesheet("dude","assets/img/dude.png",32,48),D.load.image("background","assets/img/background2.png"),D.load.image("atari","assets/img/block.png"),D.load.image("ground_1x1","assets/img/ground_1x1.png"),D.load.atlas("seacreatures","assets/img/seacreatures_json.png","assets/img/seacreatures_json.json"),D.load.spritesheet("sprMusic","assets/img/music.png",54,54),D.load.audio("fall_sound","assets/sounds/fall.mp3"),D.load.audio("jump_sound","assets/sounds/jump.mp3"),D.load.audio("bgm","assets/music/bgm.mp3"),D.load.audio("success_sound","assets/sounds/success.mp3"),D.load.audio("getbox_sound","assets/sounds/transform.mp3"),D.load.audio("cat_sound","assets/sounds/cat.wav")}function e(){t=0,D.physics.startSystem(Phaser.Physics.ARCADE),q=D.add.tileSprite(0,0,900,600,"background"),D.world.setBounds(0,0,900,600),D.physics.arcade.gravity.y=300,s=D.add.sprite(600,50,"ground_1x1"),D.physics.enable(s,Phaser.Physics.ARCADE),s.body.enableBody=!0,s.body.allowGravity=!1,n=D.add.sprite(32,320,"dude"),n.scale.set(2),D.physics.enable(n,Phaser.Physics.ARCADE),n.body.bounce.y=.2,n.body.bounce.x=.2,n.body.collideWorldBounds=!0,n.body.maxVelocity.y=500,n.body.setSize(28,40,5,16),n.body.embedded=!1,n.animations.add("left",[0,1,2,3],10,!0),n.animations.add("turn",[4],20,!0),n.animations.add("right",[5,6,7,8],10,!0),r=D.add.physicsGroup(Phaser.Physics.ARCADE),r.enableBody=!0,o=D.input.keyboard.createCursorKeys(),p=D.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),q.inputEnabled=!0,q.events.onInputDown.add(g,this),D.camera.follow(n,Phaser.Camera.FOLLOW_TOPDOWN),v=D.add.sprite(600,0,"seacreatures"),v.scale.setTo(.5),v.animations.add("swim",Phaser.Animation.generateFrameNames("octopus",0,24,"",4),30,!0),v.animations.play("swim"),D.physics.enable(v,Phaser.Physics.ARCADE),v.body.enableBody=!0,v.body.allowGravity=!1,D.add.tween(v).to({x:700},2e3,Phaser.Easing.Quadratic.InOut,!0,0,1e3,!0),w=D.add.sound("fall_sound"),x=D.add.sound("jump_sound"),z=D.add.sound("success_sound"),y=D.add.sound("getbox_sound"),A=D.add.sound("cat_sound",.5,!0),A.play(),B=D.add.sound("bgm",.3),B.play(),C=D.add.text(D.world.centerX,D.world.centerY,"点击屏幕放置箱子\n点击箱子收回\n使用方向键或点击屏幕移动主角\n快把小猫救下来啊！",{font:"40px Arial",fill:"#ffffff",align:"center"}),C.anchor.setTo(.5,.5),u=D.add.button(32,32,"sprMusic",f),u.anchor.setTo(.5,.5),u.frame=1}function f(){1==u.frame?(u.frame=0,B.stop()):(u.frame=1,B.play())}function g(){H===!1&&(C.visible=!1,H=!0),I>t?i():h()}function h(){var a=D.physics.arcade.angleToPointer(n);a>-1.6&&1.6>a?(n.body.velocity.x=150,"right"!=E&&(n.animations.play("right"),E="right")):(n.body.velocity.x=-150,"left"!=E&&(n.animations.play("left"),E="left")),G=D.time.now+500,(n.body.touching.down||n.body.onFloor())&&D.time.now>F&&(n.body.velocity.y=-250,x.play(),F=D.time.now+750)}function i(){if(I>t){var a=r.create(D.input.activePointer.worldX-47.5,100,"atari");w.play(),a.body.collideWorldBounds=!0,a.body.bounce.x=0,a.body.embedded=!1,a.inputEnabled=!0,a.events.onInputDown.add(j,this),t++}}function j(a){t>0&&(r.remove(a),a.kill(),y.play(),t--)}function k(){D.physics.arcade.collide(n,r),D.physics.arcade.collide(r),D.physics.arcade.collide(n,v,null,l,this),r.setAll("body.velocity.x",0),o.left.isDown?(n.body.velocity.x=-150,"left"!=E&&(n.animations.play("left"),E="left")):o.right.isDown?(n.body.velocity.x=150,"right"!=E&&(n.animations.play("right"),E="right")):"idle"!=E&&D.time.now>G&&(n.body.velocity.x=0,n.animations.stop(),"left"==E?n.frame=0:n.frame=5,E="idle"),p.isDown&&(n.body.touching.down||n.body.onFloor())&&D.time.now>F&&(n.body.velocity.y=-250,x.play(),F=D.time.now+750)}function l(a,b){b.kill(),C.text="小猫得救了",C.visible=!0,A.stop(),B.stop(),z.play()}function m(){}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=new Phaser.Game(800,600,Phaser.CANVAS,"game5",{preload:d,create:e,update:k,render:m}),E="left",F=0,G=0,H=!1,I=15},{}]},{},[1]);